{
  "hash": "fc8200a1cbfebc7fbf44d410afd887f7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Linear Regression\ndate: today\ndate-format: long\nfooter: \"[IAFF 6501 Website](https://quant4ia.rocks/)\"\nlogo: images/iaff6501-logo.png\nformat:\n  revealjs:\n    theme: [simple, custom.scss]\n    transition: fade\n    slide-number: true\n    #multiplex: true\n    chalkboard: true\nexecute:\n  echo: false\n  message: false\n  warning: false\n  freeze: auto\n---\n\n::: {.cell}\n\n:::\n\n\n## Linear Model with Single Predictor\n\n<br>\n\nGoal: Estimate Democracy score ($\\hat{Y_{i}}$) of a country given level of GDP per capita ($X_{i}$).\n\n<br>\n\nOr: Estimate relationship between GDP per capita and democracy.\n\n## Linear Model with Single Predictor\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/model-data-1.png){width=960}\n:::\n:::\n\n\n# Estimate Model using Tidymodels\n\n## \n\n<br>\n\nStep 1: Specify model\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlinear_reg()\n```\n:::\n\n\n## \n\n<br>\n\nStep 2: Set model fitting *engine*\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlinear_reg() |>\n  set_engine(\"lm\") # lm: linear model\n```\n:::\n\n\n## \n\n<br>\n\nStep 3: Fit model & estimate parameters\n\n<bt>\n\n... using **formula syntax**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlinear_reg() |>\n  set_engine(\"lm\") |>\n  fit(lib_dem ~ log_wealth, data = modelData) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nparsnip model object\n\n\nCall:\nstats::lm(formula = lib_dem ~ log_wealth, data = data)\n\nCoefficients:\n(Intercept)   log_wealth  \n     0.1327       0.1197  \n```\n\n\n:::\n:::\n\n\n## \n\n<br>\n\nStep 4: Tidy things up...\n\n<br>\n\n$$\\widehat{Democracy}_{i} = 0.13 + 0.12 * {loggdppc}_{i}$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlinear_reg() |>\n  set_engine(\"lm\") |>\n  fit(lib_dem ~ log_wealth, data = modelData) |>\n  tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 Ã— 5\n  term        estimate std.error statistic  p.value\n  <chr>          <dbl>     <dbl>     <dbl>    <dbl>\n1 (Intercept)    0.133    0.0380      3.49 6.04e- 4\n2 log_wealth     0.120    0.0147      8.16 6.97e-14\n```\n\n\n:::\n:::\n\n\n\n## Interpretation?\n\n<br>\n\n$$\\widehat{Democracy}_{i} = 0.13 + 0.12 * {loggdppc}_{i}$$\n\n## Question\n\n<br>\n\nHow do we get the \"best\" values for the slope and intercept?\n\n\n## How would you draw the \"best\" line?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line-1.png){width=960}\n:::\n:::\n\n\n\n## How would you draw the \"best\" line?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line2-1.png){width=960}\n:::\n:::\n\n\n## Least squares regression\n\n<br>\n\n- Remember the residual is the difference between the actual value and the predicted value\n\n. . .\n\n- The regression line minimizes the sum of squared residuals.\n\n## Least squares regression\n\n<br>\n\n- Residual for each point is:  $e_i = y_i - \\hat{y}_i$\n\n- Least squares regression line minimizes $\\sum_{i = 1}^n e_i^2$.\n\n. . .\n\n- Why do we square the residual?\n\n. . .\n\n- Why not take absolute value?\n\n    - Principle: larger penalty for residuals further away\n    - Math: makes the math easier and some nice properties (not our concern here...)\n\n## Least squares regression\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line3-1.png){width=960}\n:::\n:::\n\n\n## Very Simple Example\n\nWhat should the slope and intercept be?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line4-1.png){width=960}\n:::\n:::\n\n\n\n## Example\n\n$\\hat{Y} = 0 + 1*X$\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line5-1.png){width=960}\n:::\n:::\n\n\n## Example\n\nWhat is the sum of squared residuals?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line6-1.png){width=960}\n:::\n:::\n\n\n## Example\n\nWhat is sum of squared residuals for $y = 0 + 0*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line7-1.png){width=960}\n:::\n:::\n\n\n\n## Example\n\nWhat is sum of squared residuals for $y = 0 + 0*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line8-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(1-0)^2 + (2-0)^2 + (3-0)^2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 14\n```\n\n\n:::\n:::\n\n\n\n\n## Example\n\nWhat is sum of squared residuals for $y = 0 + 2*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line10-1.png){width=960}\n:::\n:::\n\n\n## Example\n\nWhat is sum of squared residuals for $y = 0 + 2*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line11-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(1-2)^2 + (2-4)^2 + (3-6)^2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 14\n```\n\n\n:::\n:::\n\n\n\n## One more...\n\nWhat is sum of squared residuals for $y = 0 + -1*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line13-1.png){width=960}\n:::\n:::\n\n\n## One more...\n\nWhat is sum of squared residuals for $y = 0 + -1*X$?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/best-line14-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(1+1)^2 + (2+2)^2 + (3+3)^2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 56\n```\n\n\n:::\n:::\n\n\n## Cost Function\n\nSum of Squared Residuals as function of possible values of $b$\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/cost-function-1.png){width=960}\n:::\n:::\n\n\n\n## Least Squares Regression\n\n<br>\n\n- When we estimate a least squares regression, it is looking for the line that minimizes sum of squared residuals\n\n- In the simple example, I set $a=0$ to make it easier.  More complicated when searching for combination of $a$ and $b$ that minimize, but same basic idea\n\n## Least Squares Regression\n\n<br>\n\n- There is a way to solve for this analytically for linear regression (i.e., by doing math...)\n\n    -- They made us do this in grad school...\n\n. . .\n\n- In machine learning, people also use gradient descent algorithm in which the computer searches over possible combinations of $a$ and $b$ until it settles on the lowest point.    \n\n## Least Squares Regression\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/ssr-viz-1.png){width=960}\n:::\n:::\n\n\n## Least Squares Regression\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week-10.1_files/figure-revealjs/regression-line-1.png){width=960}\n:::\n:::\n\n\n## Your Turn {.smaller}\n\n<br>\n\nAre democracies less corrupt?\n\n<br>\n\n- V-Dem includes a Political Corruption Index, which aggregates corruption in a number of spheres (see codebook for details).  \n\n- The variable name is: *v2x_corr* : lower values mean less corruption\n\n- See started code [HERE](https://www.dropbox.com/scl/fo/8xpsrz27m0on1mc2pf5ya/h?rlkey=716y4lvy6uisq0gortq1as0sp&dl=0)\n\n\n## Your Turn {.smaller}\n\n<br>\n\n**Are democracies less corrupt?**\n\n<br>\n\n::: {.smaller}\n- Filter the V-Dem data to only include the year 2019\n- Make a scatterplot to visualize the relationship between democracy (X) and corruption (Y) (use the *v2x_libdem* variable for democracy)\n- Fit a linear model\n- Interpret results for the slope and intercept\n- For a country with the average (mean) level of democracy, what is the predicted level of corruption?\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer1\" data-update-every=\"1\" tabindex=\"0\" style=\"right:10%;bottom:5%;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n## Create Your Own Model {.smaller}\n\n<br>\n\n- What is a theory that you would like to test with V-Dem data?\n- What is the dependent variable? \n- What is the independent variable? \n- Map out steps to wrangle the data and fit a regression model\n- What do you expect to find? \n- Now go ahead and wrangle the data\n- Fit the model\n- Interpret the coefficients and their significance\n- Did the results match your expectations?",
    "supporting": [
      "week-10.1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}